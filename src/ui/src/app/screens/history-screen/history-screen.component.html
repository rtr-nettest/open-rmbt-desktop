<app-header></app-header>
<app-body>
    <app-main-menu *ngIf="env?.FLAVOR !== 'ont'"></app-main-menu>
    <app-main-content *ngIf="result$ | async as result; else noResult">
        <app-export-warning></app-export-warning>
        <div class="app-main" *transloco="let t">
            <h1 *ngIf="env?.FLAVOR && env?.FLAVOR !== 'ont'" class="app-title">
                {{ t("History") }}
                <app-action-buttons
                    [items]="actionButtons"
                ></app-action-buttons>
            </h1>
            <h1 *ngIf="env?.FLAVOR === 'ont'" class="app-title app-title--ont">
                {{ getHeading(result.totalElements) }}
            </h1>
            <div class="app-wrapper">
                <app-table
                    [action]="changeSort"
                    [columns]="(columns$ | async)!"
                    [data]="result"
                    [sort]="(sort$ | async)!"
                    [shouldHideHeader]="false"
                    [tableClassNames]="tableClassNames ?? []"
                ></app-table>
                <button
                    *ngIf="!allLoaded"
                    mat-flat-button
                    color="primary"
                    (click)="loadMore()"
                    [disabled]="loading"
                    [ngClass]="
                        env?.FLAVOR === 'ont' ? 'app-button--expanded' : ''
                    "
                >
                    {{ loading ? t("Loading") : t("Load more") }}
                </button>
            </div>
        </div>
        <app-footer></app-footer>
    </app-main-content>
</app-body>
<app-scroll-top></app-scroll-top>

<ng-template #noResult>
    <main class="app-main app-main--no-result">
        {{ "Fetching the history..." | transloco }}
    </main>
</ng-template>
