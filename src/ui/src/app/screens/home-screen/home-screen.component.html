<app-header></app-header>
<app-body>
    <app-main-menu></app-main-menu>
    <app-main-content *ngIf="env$ | async as env">
        <div *ngIf="showProgress" style="width: 100%">
            <mat-spinner style="margin: auto"></mat-spinner>
        </div>
        <ng-container *ngIf="!showProgress">
            <div class="app-wrapper" *transloco="let t">
                <h1 class="app-title" *ngIf="env?.FLAVOR === 'ont'">
                    {{ t("test.title") }}
                </h1>
                <app-start-test-button></app-start-test-button>
                <ng-container
                    *ngTemplateOutlet="env?.FLAVOR === 'ont' ? ont : rtr"
                ></ng-container>
            </div>
        </ng-container>
    </app-main-content>
    <app-footer></app-footer>
</app-body>

<ng-template #rtr>
    <div class="app-link-wrapper app-link-wrapper--metrics">
        <app-home-metrics
            [list]="ipInfo$ | async"
            title="Your IP address"
        ></app-home-metrics>
    </div>
</ng-template>

<ng-template #ont>
    <div class="app-link-wrapper">
        <!-- TODO: take the href and the text from the CMS -->
        <a
            class="app-link"
            href="https://nettest.com/en/methodology"
            target="_blank"
            ><mat-icon>info</mat-icon
            ><span>Learn more about the methodology of the measurement</span></a
        >
    </div>
</ng-template>
